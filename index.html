<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@tableland/jeti</title><meta name="description" content="Documentation for @tableland/jeti"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">@tableland/jeti</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1>@tableland/jeti</h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography">
<a href="#tablelandsdk" id="tablelandsdk" style="color: inherit; text-decoration: none;">
  <h1>@tableland/sdk</h1>
</a>
<p><a href="https://github.com/tablelandnetwork/js-tableland/actions/workflows/lint-and-test.yml"><img src="https://github.com/tablelandnetwork/js-tableland/actions/workflows/lint-and-test.yml/badge.svg" alt="Lint and test"></a>
<a href="./package.json"><img src="https://img.shields.io/github/package-json/v/tablelandnetwork/js-tableland.svg" alt="GitHub package.json version"></a>
<a href="https://github.com/tablelandnetwork/js-tableland/releases/latest"><img src="https://img.shields.io/github/release/tablelandnetwork/js-tableland.svg" alt="Release"></a>
<a href="https://github.com/RichardLitt/standard-readme"><img src="https://img.shields.io/badge/standard--readme-OK-green.svg" alt="standard-readme compliant"></a></p>
<p>A TypeScript/JavaScript library for creating and querying Tables on the Tableland network.</p>

<a href="#table-of-contents" id="table-of-contents" style="color: inherit; text-decoration: none;">
  <h1>Table of Contents</h1>
</a>
<ul>
<li><a href="#tablelandsdk">@tableland/sdk</a></li>
<li><a href="#table-of-contents">Table of Contents</a></li>
<li><a href="#background">Background</a></li>
<li><a href="#install">Install</a></li>
<li><a href="#usage">Usage</a></li>
<li><a href="#api">API</a><ul>
<li><a href="#connecting-to-tableland">Connecting to Tableland</a></li>
<li><a href="#creating-tables">Creating Tables</a></li>
<li><a href="#listing-tables">Listing Tables</a></li>
<li><a href="#mutating-tables">Mutating Tables</a></li>
<li><a href="#querying-tables">Querying Tables</a></li>
</ul>
</li>
<li><a href="#feedback">Feedback</a></li>
<li><a href="#examples">Examples</a></li>
<li><a href="#maintainers">Maintainers</a></li>
<li><a href="#contributing">Contributing</a></li>
<li><a href="#license">License</a></li>
</ul>

<a href="#background" id="background" style="color: inherit; text-decoration: none;">
  <h1>Background</h1>
</a>
<p>The Tableland project provides a zero-config Typescript/Javascript SDK that make it easy to interact with the Tableland network from Ethereum-based applications. The <a href="https://github.com/tablelandnetwork/js-tableland"><code>@tableland/sdk</code></a> SDK should feel comfortable to developers already familiar with the <a href="https://docs.ethers.io/"><code>ethersjs</code> Javascript library</a>. The Tableland SDK provides a small but powerful API surface that integrates nicely with existing ETH development best practices.</p>
<p>Simply import the library, connect to the Tableland network, and you are ready to start creating and updating tables.</p>
<blockquote>
<p>Note: Interested in supporting additional chains and ecosystems? Create an Issue and let us know!</p>
</blockquote>

<a href="#install" id="install" style="color: inherit; text-decoration: none;">
  <h1>Install</h1>
</a>
<p>Installation is easy using npm or yarn. An ES bundle is also available for those operating purely in a browser environnement.</p>
<pre><code class="language-bash"><span class="hl-0">npm i @tableland/sdk</span>
</code></pre>
<blockquote>
<p>Note: Not seeing the build type you need for your project or idea? Let us know, we&#39;re happy to work with you to improve the SDK usability!</p>
</blockquote>

<a href="#usage" id="usage" style="color: inherit; text-decoration: none;">
  <h1>Usage</h1>
</a>
<p>Most common Tableland usage patterns will follow something like the following. In general, you&#39;ll need to connect, create, mutate, and query your tables. In that order :)</p>
<pre><code class="language-typescript"><span class="hl-1">import</span><span class="hl-0"> { </span><span class="hl-2">connect</span><span class="hl-0"> } </span><span class="hl-1">from</span><span class="hl-0"> </span><span class="hl-3">&quot;@tableland/sdk&quot;</span><span class="hl-0">;</span><br/><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">connection</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-6">connect</span><span class="hl-0">({ </span><span class="hl-2">network:</span><span class="hl-0"> </span><span class="hl-3">&quot;testnet&quot;</span><span class="hl-0"> });</span><br/><br/><span class="hl-4">let</span><span class="hl-0"> </span><span class="hl-2">id</span><span class="hl-0"> = </span><span class="hl-2">connection</span><span class="hl-0">.</span><span class="hl-6">create</span><span class="hl-0">(</span><br/><span class="hl-0">  </span><span class="hl-3">`CREATE TABLE table (id int primary key, name text, primary key (id))`</span><br/><span class="hl-0">);</span><br/><span class="hl-4">let</span><span class="hl-0"> </span><span class="hl-2">res</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">connection</span><span class="hl-0">.</span><span class="hl-6">query</span><span class="hl-0">(</span><br/><span class="hl-0">  </span><span class="hl-3">`INSERT (firstname) VALUES (&#39;Murray&#39; INTO </span><span class="hl-4">${</span><span class="hl-2">id</span><span class="hl-4">}</span><span class="hl-3">)`</span><br/><span class="hl-0">);</span><br/><span class="hl-2">res</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">connection</span><span class="hl-0">.</span><span class="hl-6">query</span><span class="hl-0">(</span><span class="hl-3">`SELECT * FROM </span><span class="hl-4">${</span><span class="hl-2">id</span><span class="hl-4">}</span><span class="hl-3">`</span><span class="hl-0">);</span>
</code></pre>

<a href="#api" id="api" style="color: inherit; text-decoration: none;">
  <h1>API</h1>
</a>
<p><a href="https://tablelandnetwork.github.io/js-tableland/">Full library documentation available on GitHub</a>!</p>

<a href="#connecting-to-tableland" id="connecting-to-tableland" style="color: inherit; text-decoration: none;">
  <h2>Connecting to Tableland</h2>
</a>
<p>The <code>@tableland/sdk</code> library includes functions for connecting to remote clients, creating and mutating tables, querying existing tables, and listing all user tables. These top level exports are available as individual function.</p>
<p>The <a href="https://tablelandnetwork.github.io/js-tableland/modules.html#connect"><code>connect</code></a> function can be used to connect to a remote Tableland host, which is required to interact with the Tableland network. If information about a known Tableland validator is available, this can be specified as the host parameter in the <code>options</code> argument to the connect function.</p>
<p>Upon calling <code>connect</code>, the user will be prompted to sign a self-signed JSON web token. This token is used to verify ownership of the given Ethereum address, and to avoid the user having to sign subsequent Tableland transactions/method calls.</p>
<pre><code class="language-typescript"><span class="hl-1">import</span><span class="hl-0"> { </span><span class="hl-2">connect</span><span class="hl-0"> } </span><span class="hl-1">from</span><span class="hl-0"> </span><span class="hl-3">&quot;@tableland/sdk&quot;</span><span class="hl-0">;</span><br/><br/><span class="hl-7">// By default, connect uses the tableland testnet validator</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">connection</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-6">connect</span><span class="hl-0">({</span><br/><span class="hl-0">  </span><span class="hl-2">network:</span><span class="hl-0"> </span><span class="hl-3">&quot;testnet&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-2">host:</span><span class="hl-0"> </span><span class="hl-3">&quot;http://testnet.tableland.network&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">});</span>
</code></pre>

<a href="#creating-tables" id="creating-tables" style="color: inherit; text-decoration: none;">
  <h2>Creating Tables</h2>
</a>
<p>Like most relational database systems, Tableland requires the user to create tables for storing, querying, and relating data. This is done via the <a href="https://tablelandnetwork.github.io/js-tableland/modules.html#create"><code>create</code></a> function. The <code>create</code> function takes a plain SQL statement string. All tables require a primary key field called <code>id</code> to be valid. Most valid SQL <em>constraints</em> are supported, and the following data types are currently supported:</p>
<ul>
<li><code>int2</code>, <code>int4</code>, <code>int8</code>, <code>serial</code>, <code>bigserial</code></li>
<li><code>text</code>, <code>uri</code>, <code>varchar</code>, <code>bpchar</code></li>
<li><code>date</code>, <code>timestamptz</code></li>
<li><code>bool</code>, <code>float4</code>, <code>float8</code>, <code>numeric</code></li>
<li><code>uuid</code>, <code>json</code></li>
</ul>
<blockquote>
<p>Note: The above list is tentative and incomplete; the accepted types are still not well defined at the spec level.</p>
</blockquote>
<pre><code class="language-typescript"><span class="hl-7">// Assumes a connection has already been established as above</span><br/><br/><span class="hl-4">const</span><span class="hl-0"> { </span><span class="hl-5">name</span><span class="hl-0">, </span><span class="hl-5">id</span><span class="hl-0"> } = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">connection</span><span class="hl-0">.</span><span class="hl-6">create</span><span class="hl-0">(</span><br/><span class="hl-0">  </span><span class="hl-3">&quot;CREATE TABLE table (name text, id int, primary key (id));&quot;</span><br/><span class="hl-0">);</span>
</code></pre>
<p>Creating a table also generates at unique table identifier (uuid). The table id is globally unique and can be used to reference the table for queries and updates after it has been created.</p>
<p>Currently, tables created by a given Ethereum address are owned by that address. For the time being, this means that the user must be signed in with the address used to create the table in order to <em>mutate</em> the table. However, any address can <em>read</em> the table at any time.</p>
<blockquote>
<p>Warn: It is not advised to store sensitive or private information on the Tableland network at this time.</p>
</blockquote>

<a href="#listing-tables" id="listing-tables" style="color: inherit; text-decoration: none;">
  <h2>Listing Tables</h2>
</a>
<p>Once tables have been created for a given address, they can be listed via the <a href="https://tablelandnetwork.github.io/js-tableland/modules.html#list"><code>list</code></a> function. This function takes no arguments and returns a list of <a href="https://tablelandnetwork.github.io/js-tableland/interfaces/TableMetadata.html"><code>TableMetadata</code></a> objects, which contains table <code>name</code>, <code>id</code>, <code>description</code>, and <code>type</code>. The <code>type</code> of a table is defined by its normalized schema, whereas <code>name</code> and <code>description</code> can be specified by the caller upon creation. <code>id</code> is auto-generated by the <code>create</code> function.</p>
<pre><code class="language-typescript"><span class="hl-7">// Assumes a connection has already been established as above</span><br/><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">tables</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">connection</span><span class="hl-0">.</span><span class="hl-6">list</span><span class="hl-0">();</span><br/><span class="hl-7">// [</span><br/><span class="hl-7">//   {</span><br/><span class="hl-7">//    &quot;id&quot;: &quot;random-uuid-string-id&quot;,</span><br/><span class="hl-7">//    &quot;type&quot;: &quot;hash-string-type&quot;,</span><br/><span class="hl-7">//    &quot;name&quot;: &quot;table&quot;,</span><br/><span class="hl-7">//    &quot;description&quot;: &quot;other information&quot;</span><br/><span class="hl-7">//   }</span><br/><span class="hl-7">// ]</span>
</code></pre>
<p>An application can use the <code>list</code> function to discover a user&#39;s tables, and determine in they are relevant for the given application.</p>

<a href="#mutating-tables" id="mutating-tables" style="color: inherit; text-decoration: none;">
  <h2>Mutating Tables</h2>
</a>
<p>Now that we have a table to work with, it is easy to use vanilla SQL statements to insert new rows, update existing rows, and even delete old rows. These mutating SQL statements will eventually require network fees to be paid to network validators. For the current MVP trials, they remain free. The generic <a href="https://tablelandnetwork.github.io/js-tableland/modules.html#query"><code>query</code></a> function can be used to mutate table rows. As an example, inserting new rows can be done like this:</p>
<pre><code class="language-typescript"><span class="hl-7">// Assumes a connection has already been established as above</span><br/><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">one</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">connection</span><span class="hl-0">.</span><span class="hl-6">query</span><span class="hl-0">(</span><br/><span class="hl-0">  </span><span class="hl-3">`INSERT INTO </span><span class="hl-4">${</span><span class="hl-2">tableId</span><span class="hl-4">}</span><span class="hl-3"> (id, name) VALUES (0, &#39;Bobby Tables&#39;);`</span><br/><span class="hl-0">);</span><br/><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">two</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">connection</span><span class="hl-0">.</span><span class="hl-6">query</span><span class="hl-0">(</span><br/><span class="hl-0">  </span><span class="hl-3">`INSERT INTO </span><span class="hl-4">${</span><span class="hl-2">tableId</span><span class="hl-4">}</span><span class="hl-3"> (id, name) VALUES (0, &#39;Bobby Tables&#39;);`</span><br/><span class="hl-0">);</span>
</code></pre>
<blockquote>
<p>Note: As mentioned previously, table mutations are currently restricted to the table creator address.</p>
</blockquote>
<p>This inserted row can then be removed from the table state like this:</p>
<pre><code class="language-typescript"><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">remove</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">connection</span><span class="hl-0">.</span><span class="hl-6">query</span><span class="hl-0">(</span><span class="hl-3">`DELETE FROM </span><span class="hl-4">${</span><span class="hl-2">tableId</span><span class="hl-4">}</span><span class="hl-3"> WHERE id = 0;`</span><span class="hl-0">);</span>
</code></pre>
<blockquote>
<p>Warn: While rows can be deleted from the table state, row information will remain in the table&#39;s history for obvious reasons.</p>
</blockquote>

<a href="#querying-tables" id="querying-tables" style="color: inherit; text-decoration: none;">
  <h2>Querying Tables</h2>
</a>
<p>Finally, the moment we&#39;ve all been waiting for; we are ready to query our table state! You already have all the tools required to get this done. Simply use the <code>query</code> function imported previously to query the latest table state. Currently, queries are extremely flexible in Tableland. You have most SQL query features available to craft your query, though the most common will likely be the classic <code>SELECT * FROM</code> pattern shown here:</p>
<pre><code class="language-typescript"><span class="hl-4">const</span><span class="hl-0"> { </span><span class="hl-5">rows</span><span class="hl-0">, </span><span class="hl-5">columns</span><span class="hl-0"> } = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">connection</span><span class="hl-0">.</span><span class="hl-6">query</span><span class="hl-0">(</span><span class="hl-3">`SELECT * FROM </span><span class="hl-4">${</span><span class="hl-2">tableId</span><span class="hl-4">}</span><span class="hl-3">;`</span><span class="hl-0">);</span>
</code></pre>
<p>The response from a read query contains a <a href="https://tablelandnetwork.github.io/js-tableland/interfaces/ReadQueryResult.html"><code>ReadQueryResult</code></a> object, with properties for <code>columns</code> and <code>rows</code>. The <code>columns</code> property contains an enumerated array of column ids and their corresponding <a href="https://tablelandnetwork.github.io/js-tableland/interfaces/ColumnDescriptor.html"><code>ColumnDescriptor</code></a> information. The <code>rows</code> property is an array of row-wise table data. The rows can be iterated over and used to populate UIs etc.</p>
<pre><code class="language-typescript"><span class="hl-1">for</span><span class="hl-0"> (</span><span class="hl-4">const</span><span class="hl-0"> [</span><span class="hl-5">rowId</span><span class="hl-0">, </span><span class="hl-5">row</span><span class="hl-0">] </span><span class="hl-4">of</span><span class="hl-0"> </span><span class="hl-8">Object</span><span class="hl-0">.</span><span class="hl-6">entries</span><span class="hl-0">(</span><span class="hl-2">rows</span><span class="hl-0">)) {</span><br/><span class="hl-0">  </span><span class="hl-2">console</span><span class="hl-0">.</span><span class="hl-6">log</span><span class="hl-0">(</span><span class="hl-3">`row: </span><span class="hl-4">${</span><span class="hl-2">rowId</span><span class="hl-4">}</span><span class="hl-3">`</span><span class="hl-0">);</span><br/><span class="hl-0">  </span><span class="hl-1">for</span><span class="hl-0"> (</span><span class="hl-4">const</span><span class="hl-0"> [</span><span class="hl-5">colId</span><span class="hl-0">, </span><span class="hl-5">data</span><span class="hl-0">] </span><span class="hl-4">of</span><span class="hl-0"> </span><span class="hl-8">Object</span><span class="hl-0">.</span><span class="hl-6">entries</span><span class="hl-0">(</span><span class="hl-2">row</span><span class="hl-0">)) {</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> { </span><span class="hl-5">name</span><span class="hl-0"> } = </span><span class="hl-2">columns</span><span class="hl-0">[</span><span class="hl-2">colId</span><span class="hl-0">];</span><br/><span class="hl-0">    </span><span class="hl-2">console</span><span class="hl-0">.</span><span class="hl-6">log</span><span class="hl-0">(</span><span class="hl-3">`  </span><span class="hl-4">${</span><span class="hl-2">name</span><span class="hl-4">}</span><span class="hl-3">: </span><span class="hl-4">${</span><span class="hl-2">data</span><span class="hl-4">}</span><span class="hl-3">`</span><span class="hl-0">);</span><br/><span class="hl-0">  }</span><br/><span class="hl-0">}</span>
</code></pre>
<p>And now you&#39;re ready to start building your next web3 experience with Tableland! If you want to dive deeper, you can check out the <a href="https://tablelandnetwork.github.io/js-tableland/">full API documentation here</a>.</p>

<a href="#feedback" id="feedback" style="color: inherit; text-decoration: none;">
  <h1>Feedback</h1>
</a>
<p>Reach out with feedback and ideas:</p>
<ul>
<li><a href="https://twitter.com/tableland__">twitter.com/tableland__</a></li>
<li><a href="https://github.com/tablelandnetwork/js-tableland/issues">Create a new issue</a></li>
</ul>

<a href="#examples" id="examples" style="color: inherit; text-decoration: none;">
  <h1>Examples</h1>
</a>
<ul>
<li><a href="https://github.com/tablelandnetwork/example-apps/">To-do App</a> (<a href="https://github.com/tablelandnetwork/example-apps/tree/loot-extension/tableland-todo">source</a>)</li>
<li><a href="https://github.com/tablelandnetwork/example-apps/">Loot Extension</a> (<a href="https://github.com/tablelandnetwork/example-apps/tree/loot-extension/loot-extension">source</a>)</li>
<li>More on the way!</li>
</ul>

<a href="#maintainers" id="maintainers" style="color: inherit; text-decoration: none;">
  <h1>Maintainers</h1>
</a>
<p><a href="https://github.com/awmuncy">@awmuncy</a></p>

<a href="#contributing" id="contributing" style="color: inherit; text-decoration: none;">
  <h1>Contributing</h1>
</a>
<p>PRs accepted.</p>
<p>To get started clone this repo, then do:</p>
<pre><code class="language-bash"><span class="hl-7"># use the latest node and npm LTS</span><br/><span class="hl-0">npm install</span><br/><span class="hl-0">npm run build</span><br/><br/><span class="hl-7"># see if everything is working</span><br/><span class="hl-0">npm </span><span class="hl-6">test</span>
</code></pre>
<p>Small note: If editing the README, please conform to the
<a href="https://github.com/RichardLitt/standard-readme">standard-readme</a> specification.</p>

<a href="#license" id="license" style="color: inherit; text-decoration: none;">
  <h1>License</h1>
</a>
<p>MIT AND Apache-2.0, © 2021-2022 Tableland Network Contributors</p>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Exports</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="tsd-kind-function"><a href="modules.html#prepare" class="tsd-kind-icon">prepare</a></li><li class="tsd-kind-function"><a href="modules.html#resolve" class="tsd-kind-icon">resolve</a></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="assets/main.js"></script></body></html>